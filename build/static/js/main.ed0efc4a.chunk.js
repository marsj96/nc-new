(this["webpackJsonpnc-new"]=this["webpackJsonpnc-new"]||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},131:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(36),s=c.n(i),r=(c(103),c(104),c(26)),o=c(14),l=c(8),j=c(171),d=c(173),b=c(174),u=c(175),h=c(161),x=c(169),O=c(170),m=c(1),p=a.a.createContext(),f=function(e){var t=e.children,c=Object(n.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],r=Object(n.useState)(!1),o=Object(l.a)(r,2),j=o[0],d=o[1];return Object(m.jsx)(p.Provider,{value:{user:i,setUser:s,loggedIn:j,setLoggedIn:d},children:t})},g=c(20),v=c.n(g),y=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),w=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(n.useContext)(p),s=i.setLoggedIn,o=i.user,f=i.setUser,g=i.loggedIn;Object(n.useEffect)((function(){y.get("/users").then((function(e){return e.data.users})).then((function(e){a(e)}))}),[]),Object(n.useEffect)((function(){"User"===o||0===o.length?s(!1):s(!0)}),[o,s]);var v=function(e){f(e)};return Object(m.jsx)(O.a,{sx:{flexGrow:1},children:Object(m.jsx)(j.a,{position:"static",children:Object(m.jsxs)(d.a,{style:{maxHeight:"1px",fontFamily:"Roboto sans-serif"},children:[Object(m.jsx)(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(m.jsx)(u.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(m.jsxs)("h5",{style:{textAlign:"left",wordSpacing:"25px"},children:[Object(m.jsx)(r.b,{to:"/",style:{textDecoration:"none",color:"white"},children:"Home "}),Object(m.jsx)(r.b,{to:"/topics",style:{textDecoration:"none",color:"white"},children:"Topics "})]})}),Object(m.jsx)(O.a,{sx:{marginRight:"30px",background:g?"none":"white",borderRadius:"3px",width:g?"115px":"150px",borderStyle:g?"none":"solid"},children:g?Object(m.jsxs)(u.a,{style:{color:"white"},children:[o," "]}):Object(m.jsxs)(h.a,{onChange:function(e){var t=e.target.value;v(t)},children:[Object(m.jsx)("option",{value:"null",children:" Select user "}),c.map((function(e){return Object(m.jsxs)("option",{value:e.username,children:[" ",e.name," "]},e.username)}))]})}),g?Object(m.jsx)(x.a,{size:"small",style:{color:"white",background:"red",marginLeft:"-20px",width:"100px"},onClick:function(){f([]),s(!1)},children:"Log out"}):""]})})})},k=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),N=c(176),C=c(177),_=c(168),S=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),o=s[0],j=s[1],d=Object(n.useState)([]),b=Object(l.a)(d,2),u=b[0],p=b[1];return Object(n.useEffect)((function(){(function(e,t){if(t)return k.get("/articles?order=".concat(t)).then((function(e){return e.data.articles}));if(""!==e&&"Date"!==e){var c=e.toLowerCase();return console.log(c),k.get("/articles?sort_by=".concat(c)).then((function(e){return e.data.articles}))}return k.get("/articles").then((function(e){return e.data.articles}))})(c,o).then((function(e){p(e)}))}),[c,o]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"filterBy",children:[Object(m.jsxs)(O.a,{sx:{minWidth:80},children:[Object(m.jsx)(_.a,{variant:"standard",htmlFor:"uncontrolled-native",children:"Filter"}),Object(m.jsxs)(h.a,{onChange:function(e){var t=e.target.value;a(t),j("")},children:[Object(m.jsx)("option",{value:"Date",children:"Date"}),Object(m.jsx)("option",{value:"Title",children:"Title"}),Object(m.jsx)("option",{value:"Topic",children:"Topic"}),Object(m.jsx)("option",{value:"Votes",children:"Votes"}),Object(m.jsx)("option",{value:"Comment_count",children:"Comment count"}),Object(m.jsx)("option",{value:"Author",children:"Author"})]})]}),Object(m.jsx)(x.a,{className:"ascButton",style:{borderRadius:"20",maxHeight:"30px",marginTop:"20px",marginLeft:"20px",marginBottom:"15px",marginRight:"10px",background:"#40c4ff",color:"white"},onClick:function(){j("ASC")},children:" ASC "}),Object(m.jsx)(x.a,{className:"ascButton",style:{borderRadius:"20",maxHeight:"30px",marginBottom:"15px",marginTop:"20px",marginRight:"10px",background:"#40c4ff",color:"white"},onClick:function(){j("DESC")},children:" DESC "})]}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{className:"articlesPage",children:u.map((function(e){return Object(m.jsx)(N.a,{variant:"outlined",style:{margin:"10px",background:"whitesmoke"},children:Object(m.jsxs)("ul",{className:"articlesCards",children:[Object(m.jsx)("li",{children:Object(m.jsx)(r.b,{to:"/articles/".concat(e.article_id),style:{textDecoration:"none",color:"white"},children:Object(m.jsx)("h2",{className:"articleTitle",children:e.title},e.article_id)})},e.article_id),Object(m.jsx)(r.b,{to:"/articles/".concat(e.article_id),style:{textDecoration:"none",color:"white"},children:Object(m.jsx)("li",{className:"articleBody",children:Object(m.jsxs)("p",{children:[" ",e.body.slice(0,200),"... "]},e.body)},e.body)}),Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"articleBottom",children:[Object(m.jsxs)("h4",{children:["".concat(e.author," "),"Votes:","".concat(e.votes," "),"".concat(e.created_at.slice(0,10)," ")]}),Object(m.jsx)(C.a,{children:Object(m.jsx)(r.b,{to:"/articles/".concat(e.article_id),style:{textDecoration:"none",color:"blue"},children:Object(m.jsx)(x.a,{size:"small",style:{marginTop:"-20px",marginLeft:"-10px",background:"#40c4ff",color:"white"},children:"Comments"})})})]},e.created_at)},e.created_at)]})},e.article_id)}))})]})},B=function(){return Object(m.jsx)("h1",{className:"mainHeader",children:"NC-News"})},R=c(16),D=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),L=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),U=function(e,t){return L.patch("/articles/".concat(e),{inc_votes:t}).then((function(e){return e.data}))},T=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),A=c(165),E=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),z=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),r=s[0],j=s[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),u=b[0],h=b[1],O=Object(n.useState)(""),f=Object(l.a)(O,2),g=f[0],v=f[1],y=Object(n.useState)(""),w=Object(l.a)(y,2),C=w[0],_=w[1],S=Object(n.useState)([]),B=Object(l.a)(S,2),L=B[0],z=B[1],I=Object(n.useState)(0),P=Object(l.a)(I,2),H=P[0],V=P[1],F=Object(o.g)().article_id,J=Object(n.useContext)(p),G=J.loggedIn,W=J.user,M=function(e,t){e.preventDefault(),v(t)};return Object(n.useEffect)((function(){var e;(e=F,k.get("/articles/".concat(e)).then((function(e){return e.data.articles}))).then((function(e){a(e)}))}),[F]),Object(n.useEffect)((function(){var e;(e=F,D.get("/articles/".concat(e,"/comments")).then((function(e){return e.data.comments}))).then((function(e){z(e)}))}),[F]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(N.a,{variant:"outlined",style:{margin:"10px",background:"whitesmoke"},children:Object(m.jsxs)("ul",{className:"articlesCards",children:[Object(m.jsx)("li",{children:Object(m.jsx)("h2",{className:"articleTitle",children:c.title},c.title)}),Object(m.jsx)("li",{children:Object(m.jsxs)("p",{className:"articleBody",children:[" ",c.body," "]})}),Object(m.jsx)("li",{children:Object(m.jsxs)("div",{className:"articleBottom",children:[Object(m.jsxs)("h4",{className:"articleBottom",children:[c.author," Votes:","".concat(c.votes+H," ")," ",c.created_at?c.created_at.slice(0,10):""]}),G?Object(m.jsx)("p",{className:"upvoteButton",children:Object(m.jsx)(x.a,{size:"small",style:{color:"white"},onClick:function(){U(F,1),j(!1),V((function(e){return e+1}))},children:"Like"})}):"",G?Object(m.jsx)("p",{className:"upvoteButton",children:Object(m.jsx)(x.a,{size:"small",style:{color:"white"},onClick:function(){U(F,-1),V((function(e){return e-1}))},children:"Dislike"})}):""]})})]})}),G?Object(m.jsxs)("div",{children:[Object(m.jsx)(x.a,{variant:"contained",style:{borderRadius:20,marginBottom:"15px",marginRight:"10px",background:"#40c4ff",color:"white"},onClick:function(){j(!0),h(!0)},children:"Post a comment"}),u?Object(m.jsx)(x.a,{variant:"contained",style:{borderRadius:20,marginBottom:"15px",background:"#D22B2B",color:"white"},onClick:function(){j(!1),h(!1)},children:"X"}):""]}):Object(m.jsx)("p",{children:" Please log in to post a comment. "}),r?Object(m.jsxs)("form",{onSubmit:M,children:[Object(m.jsx)("label",{children:Object(m.jsx)(A.a,{fullWidth:!0,id:"standard-basic",className:"commentPost",style:{border:"white"},label:"Press enter to send comment",variant:"outlined",value:C,onChange:function(e){var t=e.target.value;_(t),M(e,t)}})}),Object(m.jsx)(x.a,{className:"loginButton",type:"submit",value:"Send",onClick:function(){var e,t;e=F,t={username:W,body:g},T.post("/articles/".concat(e,"/comments"),t).then((function(e){return e.data})),j(!1),h(!1),z((function(e){var t=Object(R.a)(e);return t.unshift({author:W,body:g,votes:0,created_at:"Just now..",comment_id:500}),t}))}})]}):""]},c.article_id),Object(m.jsx)("div",{children:L.map((function(e){return Object(m.jsx)(N.a,{variant:"outlined",style:{margin:"10px",background:"whitesmoke"},children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{className:"commentAuthor",children:[" ",e.author," "]}),Object(m.jsxs)("p",{className:"commentBody",children:[" ",e.body," "]}),Object(m.jsxs)("p",{className:"votesComment",children:[" ",e.created_at.slice(0,10)]}),G&&W===e.author?Object(m.jsx)("p",{children:Object(m.jsx)(x.a,{size:"small",onClick:function(){var t;t=e.comment_id,E.delete("/comments/".concat(t)),z((function(t){return Object(R.a)(t).filter((function(t){return t.comment_id!==e.comment_id}))}))},children:"Delete"})}):""]})},e.comment_id)}))})]})},I=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),P=function(){var e=Object(o.g)(),t=Object(n.useState)([]),c=Object(l.a)(t,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){var t;(t=e.topic,I.get("/articles?topic=".concat(t)).then((function(e){return e.data.articles}))).then((function(e){i(e)}))}),[e.topic]),Object(m.jsxs)("div",{children:[a.length>0?Object(m.jsxs)("h2",{children:[" ",a[0].topic.charAt(0).toUpperCase()+a[0].topic.slice(1)," Articles "]}):" ",a.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsx)(N.a,{variant:"outlined",style:{margin:"10px",background:"whitesmoke"},children:Object(m.jsx)("ul",{className:"articlesCards",children:Object(m.jsxs)(r.b,{to:"/articles/".concat(e.article_id),style:{textDecoration:"none"},children:[Object(m.jsx)("li",{children:Object(m.jsxs)("h2",{className:"articleTitle",children:[" ",e.title," "]})}),Object(m.jsx)("li",{className:"articleBody",children:Object(m.jsxs)("p",{children:[e.body.slice(0,100),"..."]})}),Object(m.jsx)("li",{children:Object(m.jsxs)("p",{className:"articleBottom",style:{textDecoration:"none",color:"black"},children:[e.author," Votes:",e.votes]})})]})})})},e.article_id)}))]})},H=v.a.create({baseURL:"https://nc-news-reddit.herokuapp.com/api/"}),V=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){H.get("/topics").then((function(e){return e.data.topics})).then((function(e){a(e)}))}),[]),Object(m.jsx)("div",{children:c.map((function(e){return Object(m.jsx)(N.a,{variant:"outlined",style:{margin:"10px",background:"whitesmoke"},children:Object(m.jsx)(r.b,{to:"/topics/".concat(e.slug),style:{textDecoration:"none",color:"white"},children:Object(m.jsxs)("ul",{className:"articlesCards",children:[Object(m.jsx)("li",{children:Object(m.jsxs)("h2",{className:"articleTitle",children:[" ",e.slug.charAt(0).toUpperCase()+e.slug.slice(1)," "]},e.slug)}),Object(m.jsx)("li",{children:Object(m.jsxs)("p",{className:"articleBody",children:[" ",e.description," "]},e.description)})]},"test")})},e.slug)}))})};var F=function(){return Object(m.jsx)(f,{children:Object(m.jsx)(r.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(w,{}),Object(m.jsxs)("main",{className:"main",children:[Object(m.jsx)(B,{}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/",element:Object(m.jsx)(S,{})}),Object(m.jsx)(o.a,{path:"/articles/:article_id",element:Object(m.jsx)(z,{})}),Object(m.jsx)(o.a,{path:"/topics",element:Object(m.jsx)(V,{})}),Object(m.jsx)(o.a,{path:"/topics/:topic",element:Object(m.jsx)(P,{})})]})]})]})})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(F,{})}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.ed0efc4a.chunk.js.map